<!--Ohne Datenbank-->
<section>
    <h2>Herausforderung:</h2>
    <br>
    <h3>Ohne Datenbank, wie?</h3>
    <ul>
        <li>
            TempData
            <span class="fragment" style="color:red">X</span>
        </li>
        <li>
            Session Middelware
            <span class="fragment" style="color:red">X</span>
        </li>
        <li>
            Cookies
            <span class="fragment" style="color:red">X</span>
        </li>
        <li>
            Hidden Fields / Query Strings
            <span class="fragment" style="color:green">✅</span>
        </li>
    </ul>
</section>

<section>
    <h3>Lösung: Hidden Fields / Query Strings</h3>
    <pre class="fragment fade-in"><code class="language-cs">
private async Task&lt;Project[]&gt; GetProjects(int campaignId)
{
    JsonElement result = await _clientsc.GetJsonElement&lt;Project&gt;("Projects", $"?CampaignID={campaignId}");
    if (result.TryGetProperty("Projects", out JsonElement data))
    {
        Project[] projects = Parser.ParseJson&lt;Project[]&gt;(data);
        return projects;
    }
}
</code></pre>

    <pre class="fragment fade-in"><code class="language-cs">
public async Task&lt;IActionResult&gt; Projects(int campaignId)
{
    var projects = await GetProjects(campaignId);
    ViewData["SelectedCampaign"] = campaignId;
    return View(projects);
}
</code></pre>
</section>
<!--Seperate Slide for Select Method since it does not all fit on one slide-->
<section>
    <h2>Select Methode</h2>
    <br>
    <pre class="fragment fade-in"><code class="language-cs">
public async Task&lt;IActionResult&gt; SelectProject(int projectId, int campaignId)
{
    var projects = await GetProjects(campaignId);
    var selectedProject = Array.Find(projects, p => p.ID == projectId);
		if (selectedProject == null)
        {
            // Handle the case where the project ID is invalid
            TempData["Error"] = "The selected project does not exist.";
            return View("Projects");
        }
    return RedirectToAction("AddressFiles", new {campaignId, projectId = selectedProject.ID});
}
</code></pre>
</section>