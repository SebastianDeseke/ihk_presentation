<pre class="fragment fade-in"><code class="language-cs">
private async Task&lt;Project[]&gt; GetProjects(int campaignId)
{
    JsonElement result = await _clientsc.GetJsonElement&lt;Project&gt;("Projects", $"?CampaignID={campaignId}");
    if (result.TryGetProperty("Projects", out JsonElement data))
    {
        Project[] projects = Parser.ParseJson&lt;Project[]&gt;(data);
        return projects;
    }
}
</code></pre>

<pre class="fragment fade-in"><code class="language-cs">
public async Task&lt;IActionResult&gt; Projects(int campaignId)
{
    var projects = await GetProjects(campaignId);
    ViewData["SelectedCampaign"] = campaignId;
    return View(projects);
}
</code></pre>

<pre class="fragment fade-in"><code class="language-cs">
public async Task&lt;IActionResult&gt; SelectProject(int projectId, int campaignId)
{
    var projects = await GetProjects(campaignId);
    var selectedProject = Array.Find(projects, p => p.ID == projectId);
    return RedirectToAction("AddressFiles", new { campaignId, projectId = selectedProject.ID });
}
</code></pre>

<textarea data-template>
	```cs
	private async Task<Project[]> GetProjects(int campaignId)
	{
	    JsonElement result = await _clientsc.GetJsonElement<Project>("Projects", $"?CampaignID={campaignId}");
	    if (result.TryGetProperty("Projects", out JsonElement data))
	    {
	        Project[] projects = Parser.ParseJson<Project[]>(data);
	        return projects;
	    }

	```cs
	public async Task<IActionResult> Projects(int campaignId)
	{
	    var projects = await GetProjects(campaignId);
	    ViewData["SelectedCampaign"] = campaignId;
	    return View(projects);
	}

	```cs
	public async Task<IActionResult> SelectProject(int projectId, int campaignId)
	{
	    var projects = await GetProjects(campaignId);
	    var selectedProject = Array.Find(projects, p => p.ID == projectId);
	    return RedirectToAction("AddressFiles", new { campaignId, projectId = selectedProject.ID });
	}
	```
</textarea>